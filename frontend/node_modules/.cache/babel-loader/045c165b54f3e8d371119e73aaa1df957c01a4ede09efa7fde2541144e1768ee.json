{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, withKeys as _withKeys, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, withModifiers as _withModifiers, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"register-container\"\n};\nconst _hoisted_2 = {\n  class: \"card-header\"\n};\nconst _hoisted_3 = {\n  class: \"register-footer\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_UserFilled = _resolveComponent(\"UserFilled\");\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_card, {\n    class: \"register-card\",\n    shadow: \"always\"\n  }, {\n    header: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"h2\", null, [_createVNode(_component_el_icon, null, {\n      default: _withCtx(() => [_createVNode(_component_UserFilled)]),\n      _: 1 /* STABLE */\n    }), _cache[4] || (_cache[4] = _createTextVNode(\" 用户注册\", -1 /* CACHED */))])])]),\n    default: _withCtx(() => [_createVNode(_component_el_form, {\n      ref: \"registerForm\",\n      model: $data.form,\n      rules: $data.rules,\n      \"label-width\": \"80px\",\n      onSubmit: _withModifiers($options.handleRegister, [\"prevent\"])\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_form_item, {\n        label: \"用户名\",\n        prop: \"username\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $data.form.username,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.form.username = $event),\n          placeholder: \"请输入用户名(3-50个字符)\",\n          \"prefix-icon\": $setup.User,\n          clearable: \"\"\n        }, null, 8 /* PROPS */, [\"modelValue\", \"prefix-icon\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"邮箱\",\n        prop: \"email\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $data.form.email,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.form.email = $event),\n          placeholder: \"请输入邮箱地址(可选)\",\n          \"prefix-icon\": _ctx.Message,\n          clearable: \"\"\n        }, null, 8 /* PROPS */, [\"modelValue\", \"prefix-icon\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"密码\",\n        prop: \"password\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $data.form.password,\n          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.form.password = $event),\n          type: \"password\",\n          placeholder: \"请输入密码(6-100个字符)\",\n          \"prefix-icon\": $setup.Lock,\n          \"show-password\": \"\",\n          clearable: \"\"\n        }, null, 8 /* PROPS */, [\"modelValue\", \"prefix-icon\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"确认密码\",\n        prop: \"confirmPassword\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $data.form.confirmPassword,\n          \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.form.confirmPassword = $event),\n          type: \"password\",\n          placeholder: \"请再次输入密码\",\n          \"prefix-icon\": $setup.Lock,\n          \"show-password\": \"\",\n          clearable: \"\",\n          onKeyup: _withKeys($options.handleRegister, [\"enter\"])\n        }, null, 8 /* PROPS */, [\"modelValue\", \"prefix-icon\", \"onKeyup\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, null, {\n        default: _withCtx(() => [_createVNode(_component_el_button, {\n          type: \"primary\",\n          loading: $setup.authStore.isLoading,\n          onClick: $options.handleRegister,\n          style: {\n            \"width\": \"100%\"\n          }\n        }, {\n          default: _withCtx(() => [!$setup.authStore.isLoading ? (_openBlock(), _createBlock(_component_el_icon, {\n            key: 0\n          }, {\n            default: _withCtx(() => [_createVNode(_component_UserFilled)]),\n            _: 1 /* STABLE */\n          })) : _createCommentVNode(\"v-if\", true), _createTextVNode(\" \" + _toDisplayString($setup.authStore.isLoading ? '注册中...' : '注册'), 1 /* TEXT */)]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"loading\", \"onClick\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, null, {\n        default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_3, [_cache[6] || (_cache[6] = _createElementVNode(\"span\", null, \"已有账号？\", -1 /* CACHED */)), _createVNode(_component_router_link, {\n          to: \"/login\",\n          class: \"login-link\"\n        }, {\n          default: _withCtx(() => [...(_cache[5] || (_cache[5] = [_createTextVNode(\" 立即登录 \", -1 /* CACHED */)]))]),\n          _: 1 /* STABLE */\n        })])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"model\", \"rules\", \"onSubmit\"])]),\n    _: 1 /* STABLE */\n  })]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_el_card","shadow","header","_withCtx","_createElementVNode","_hoisted_2","_component_el_icon","_component_UserFilled","_component_el_form","ref","model","$data","form","rules","onSubmit","_withModifiers","$options","handleRegister","_component_el_form_item","label","prop","_component_el_input","username","$event","placeholder","$setup","User","clearable","email","_ctx","Message","password","type","Lock","confirmPassword","onKeyup","_withKeys","_component_el_button","loading","authStore","isLoading","onClick","style","_createBlock","key","_toDisplayString","_hoisted_3","_component_router_link","to","_cache"],"sources":["/Users/a123/PythonProject/System/django_blog/frontend/src/components/UserRegister.vue"],"sourcesContent":["<template>\n  <div class=\"register-container\">\n    <el-card class=\"register-card\" shadow=\"always\">\n      <template #header>\n        <div class=\"card-header\">\n          <h2><el-icon><UserFilled /></el-icon> 用户注册</h2>\n        </div>\n      </template>\n      \n      <el-form\n        ref=\"registerForm\"\n        :model=\"form\"\n        :rules=\"rules\"\n        label-width=\"80px\"\n        @submit.prevent=\"handleRegister\"\n      >\n        <el-form-item label=\"用户名\" prop=\"username\">\n          <el-input\n            v-model=\"form.username\"\n            placeholder=\"请输入用户名(3-50个字符)\"\n            :prefix-icon=\"User\"\n            clearable\n          />\n        </el-form-item>\n        \n        <el-form-item label=\"邮箱\" prop=\"email\">\n          <el-input\n            v-model=\"form.email\"\n            placeholder=\"请输入邮箱地址(可选)\"\n            :prefix-icon=\"Message\"\n            clearable\n          />\n        </el-form-item>\n        \n        <el-form-item label=\"密码\" prop=\"password\">\n          <el-input\n            v-model=\"form.password\"\n            type=\"password\"\n            placeholder=\"请输入密码(6-100个字符)\"\n            :prefix-icon=\"Lock\"\n            show-password\n            clearable\n          />\n        </el-form-item>\n        \n        <el-form-item label=\"确认密码\" prop=\"confirmPassword\">\n          <el-input\n            v-model=\"form.confirmPassword\"\n            type=\"password\"\n            placeholder=\"请再次输入密码\"\n            :prefix-icon=\"Lock\"\n            show-password\n            clearable\n            @keyup.enter=\"handleRegister\"\n          />\n        </el-form-item>\n        \n        <el-form-item>\n          <el-button\n            type=\"primary\"\n            :loading=\"authStore.isLoading\"\n            @click=\"handleRegister\"\n            style=\"width: 100%\"\n          >\n            <el-icon v-if=\"!authStore.isLoading\"><UserFilled /></el-icon>\n            {{ authStore.isLoading ? '注册中...' : '注册' }}\n          </el-button>\n        </el-form-item>\n        \n        <el-form-item>\n          <div class=\"register-footer\">\n            <span>已有账号？</span>\n            <router-link to=\"/login\" class=\"login-link\">\n              立即登录\n            </router-link>\n          </div>\n        </el-form-item>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { useAuthStore } from '../stores/auth'\nimport { ElMessage } from 'element-plus'\nimport {Lock, User, UserFilled} from '@element-plus/icons-vue'\n\nexport default {\n  name: 'UserRegister',\n  components: {\n    UserFilled\n  },\n  setup() {\n    const authStore = useAuthStore()\n    return { authStore,\n            User,\n            Lock\n    }\n  },\n  data() {\n    return {\n      form: {\n        username: '',\n        email: '',\n        password: '',\n        confirmPassword: ''\n      },\n      rules: {\n        username: [\n          { required: true, message: '请输入用户名', trigger: 'blur' },\n          { min: 3, max: 50, message: '用户名长度3-50个字符', trigger: 'blur' }\n        ],\n        email: [\n          { type: 'email', message: '请输入正确的邮箱地址', trigger: ['blur', 'change'] }\n        ],\n        password: [\n          { required: true, message: '请输入密码', trigger: 'blur' },\n          { min: 6, max: 100, message: '密码长度6-100个字符', trigger: 'blur' }\n        ],\n        confirmPassword: [\n          { required: true, message: '请再次输入密码', trigger: 'blur' },\n          { validator: this.validateConfirmPassword, trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  methods: {\n    validateConfirmPassword(rule, value, callback) {\n      if (value !== this.form.password) {\n        callback(new Error('两次输入密码不一致'))\n      } else {\n        callback()\n      }\n    },\n    async handleRegister() {\n      try {\n        const valid = await this.$refs.registerForm.validate()\n        if (!valid) return\n        \n        const userData = {\n          username: this.form.username,\n          password: this.form.password\n        }\n        \n        if (this.form.email) {\n          userData.email = this.form.email\n        }\n        \n        const result = await this.authStore.register(userData)\n        \n        if (result.success) {\n          ElMessage.success('注册成功！请登录')\n          await this.$router.push('/login')\n        } else {\n          console.log(result.error || '注册失败')\n          ElMessage.error(result.error || '注册失败')\n        }\n      } catch (error) {\n        console.error('注册错误:', error)\n        ElMessage.error('注册过程中出现错误')\n      }\n    }\n  }\n}\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}