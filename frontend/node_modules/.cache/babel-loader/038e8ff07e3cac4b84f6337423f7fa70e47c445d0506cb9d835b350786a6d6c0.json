{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { useAuthStore } from '../stores/auth';\nimport { ElMessage } from 'element-plus';\nimport { Lock, User, UserFilled } from '@element-plus/icons-vue';\nexport default {\n  name: 'UserRegister',\n  components: {\n    UserFilled\n  },\n  setup() {\n    const authStore = useAuthStore();\n    return {\n      authStore,\n      User,\n      Lock\n    };\n  },\n  data() {\n    return {\n      form: {\n        username: '',\n        email: '',\n        password: '',\n        confirmPassword: ''\n      },\n      rules: {\n        username: [{\n          required: true,\n          message: '请输入用户名',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 50,\n          message: '用户名长度3-50个字符',\n          trigger: 'blur'\n        }],\n        email: [{\n          type: 'email',\n          message: '请输入正确的邮箱地址',\n          trigger: ['blur', 'change']\n        }],\n        password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }, {\n          min: 6,\n          max: 100,\n          message: '密码长度6-100个字符',\n          trigger: 'blur'\n        }],\n        confirmPassword: [{\n          required: true,\n          message: '请再次输入密码',\n          trigger: 'blur'\n        }, {\n          validator: this.validateConfirmPassword,\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    validateConfirmPassword(rule, value, callback) {\n      if (value !== this.form.password) {\n        callback(new Error('两次输入密码不一致'));\n      } else {\n        callback();\n      }\n    },\n    async handleRegister() {\n      try {\n        const valid = await this.$refs.registerForm.validate();\n        if (!valid) return;\n        const userData = {\n          username: this.form.username,\n          password: this.form.password\n        };\n        if (this.form.email) {\n          userData.email = this.form.email;\n        }\n        const result = await this.authStore.register(userData);\n        if (result.success) {\n          ElMessage.success('注册成功！请登录');\n          await this.$router.push('/login');\n        } else {\n          console.log(result.error || '注册失败');\n          ElMessage.error(result.error || '注册失败');\n        }\n      } catch (error) {\n        console.error('注册错误:', error);\n        ElMessage.error('注册过程中出现错误');\n      }\n    }\n  }\n};","map":{"version":3,"names":["useAuthStore","ElMessage","Lock","User","UserFilled","name","components","setup","authStore","data","form","username","email","password","confirmPassword","rules","required","message","trigger","min","max","type","validator","validateConfirmPassword","methods","rule","value","callback","Error","handleRegister","valid","$refs","registerForm","validate","userData","result","register","success","$router","push","console","log","error"],"sources":["/Users/a123/PythonProject/System/django_blog/frontend/src/components/UserRegister.vue"],"sourcesContent":["<template>\n  <div class=\"register-container\">\n    <el-card class=\"register-card\" shadow=\"always\">\n      <template #header>\n        <div class=\"card-header\">\n          <h2><el-icon><UserFilled /></el-icon> 用户注册</h2>\n        </div>\n      </template>\n      \n      <el-form\n        ref=\"registerForm\"\n        :model=\"form\"\n        :rules=\"rules\"\n        label-width=\"80px\"\n        @submit.prevent=\"handleRegister\"\n      >\n        <el-form-item label=\"用户名\" prop=\"username\">\n          <el-input\n            v-model=\"form.username\"\n            placeholder=\"请输入用户名(3-50个字符)\"\n            :prefix-icon=\"User\"\n            clearable\n          />\n        </el-form-item>\n        \n        <el-form-item label=\"邮箱\" prop=\"email\">\n          <el-input\n            v-model=\"form.email\"\n            placeholder=\"请输入邮箱地址(可选)\"\n            :prefix-icon=\"Message\"\n            clearable\n          />\n        </el-form-item>\n        \n        <el-form-item label=\"密码\" prop=\"password\">\n          <el-input\n            v-model=\"form.password\"\n            type=\"password\"\n            placeholder=\"请输入密码(6-100个字符)\"\n            :prefix-icon=\"Lock\"\n            show-password\n            clearable\n          />\n        </el-form-item>\n        \n        <el-form-item label=\"确认密码\" prop=\"confirmPassword\">\n          <el-input\n            v-model=\"form.confirmPassword\"\n            type=\"password\"\n            placeholder=\"请再次输入密码\"\n            :prefix-icon=\"Lock\"\n            show-password\n            clearable\n            @keyup.enter=\"handleRegister\"\n          />\n        </el-form-item>\n        \n        <el-form-item>\n          <el-button\n            type=\"primary\"\n            :loading=\"authStore.isLoading\"\n            @click=\"handleRegister\"\n            style=\"width: 100%\"\n          >\n            <el-icon v-if=\"!authStore.isLoading\"><UserFilled /></el-icon>\n            {{ authStore.isLoading ? '注册中...' : '注册' }}\n          </el-button>\n        </el-form-item>\n        \n        <el-form-item>\n          <div class=\"register-footer\">\n            <span>已有账号？</span>\n            <router-link to=\"/login\" class=\"login-link\">\n              立即登录\n            </router-link>\n          </div>\n        </el-form-item>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { useAuthStore } from '../stores/auth'\nimport { ElMessage } from 'element-plus'\nimport {Lock, User, UserFilled} from '@element-plus/icons-vue'\n\nexport default {\n  name: 'UserRegister',\n  components: {\n    UserFilled\n  },\n  setup() {\n    const authStore = useAuthStore()\n    return { authStore,\n            User,\n            Lock\n    }\n  },\n  data() {\n    return {\n      form: {\n        username: '',\n        email: '',\n        password: '',\n        confirmPassword: ''\n      },\n      rules: {\n        username: [\n          { required: true, message: '请输入用户名', trigger: 'blur' },\n          { min: 3, max: 50, message: '用户名长度3-50个字符', trigger: 'blur' }\n        ],\n        email: [\n          { type: 'email', message: '请输入正确的邮箱地址', trigger: ['blur', 'change'] }\n        ],\n        password: [\n          { required: true, message: '请输入密码', trigger: 'blur' },\n          { min: 6, max: 100, message: '密码长度6-100个字符', trigger: 'blur' }\n        ],\n        confirmPassword: [\n          { required: true, message: '请再次输入密码', trigger: 'blur' },\n          { validator: this.validateConfirmPassword, trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  methods: {\n    validateConfirmPassword(rule, value, callback) {\n      if (value !== this.form.password) {\n        callback(new Error('两次输入密码不一致'))\n      } else {\n        callback()\n      }\n    },\n    async handleRegister() {\n      try {\n        const valid = await this.$refs.registerForm.validate()\n        if (!valid) return\n        \n        const userData = {\n          username: this.form.username,\n          password: this.form.password\n        }\n        \n        if (this.form.email) {\n          userData.email = this.form.email\n        }\n        \n        const result = await this.authStore.register(userData)\n        \n        if (result.success) {\n          ElMessage.success('注册成功！请登录')\n          await this.$router.push('/login')\n        } else {\n          console.log(result.error || '注册失败')\n          ElMessage.error(result.error || '注册失败')\n        }\n      } catch (error) {\n        console.error('注册错误:', error)\n        ElMessage.error('注册过程中出现错误')\n      }\n    }\n  }\n}\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}