{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { useAuthStore } from './stores/auth';\nimport { ElMessage } from 'element-plus';\nimport { Star, House, Document, Edit, InfoFilled, Search, User, ArrowDown, Setting, SwitchButton } from '@element-plus/icons-vue';\nexport default {\n  name: 'App',\n  components: {\n    Star,\n    House,\n    Document,\n    Edit,\n    InfoFilled,\n    Search,\n    User,\n    ArrowDown,\n    Setting,\n    SwitchButton\n  },\n  setup() {\n    const authStore = useAuthStore();\n    return {\n      authStore\n    };\n  },\n  async created() {\n    // 初始化认证状态\n    await this.authStore.initAuth();\n\n    // 如果用户已登录且在登录/注册页，重定向到首页\n    if (this.authStore.isAuthenticated && ['/login', '/register'].includes(this.$route.path)) {\n      await this.$router.push('/home');\n    }\n\n    // 移除未登录时的重定向逻辑，允许用户访问主页\n  },\n  methods: {\n    async handleUserAction(command) {\n      switch (command) {\n        case 'profile':\n          await this.$router.push('/profile');\n          break;\n        case 'my-articles':\n          await this.$router.push('/my-articles');\n          break;\n        case 'settings':\n          await this.$router.push('/settings');\n          break;\n        case 'logout':\n          await this.handleLogout();\n          break;\n      }\n    },\n    async handleLogout() {\n      try {\n        this.authStore.logout();\n        ElMessage.success('退出登录成功');\n        await this.$router.push('/home'); // 退出登录后回到首页而不是登录页\n      } catch (error) {\n        console.error('退出登录失败:', error);\n        ElMessage.error('退出登录失败');\n      }\n    }\n  }\n};","map":{"version":3,"names":["useAuthStore","ElMessage","Star","House","Document","Edit","InfoFilled","Search","User","ArrowDown","Setting","SwitchButton","name","components","setup","authStore","created","initAuth","isAuthenticated","includes","$route","path","$router","push","methods","handleUserAction","command","handleLogout","logout","success","error","console"],"sources":["/Users/a123/PythonProject/System/django_blog/frontend/src/App.vue"],"sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <!-- 全局视觉效果组件 -->\r\n\r\n    \r\n    <div class=\"blog-layout\">\r\n      <!-- 顶部导航栏 -->\r\n      <header class=\"blog-header\">\r\n        <div class=\"header-content\">\r\n          <div class=\"logo-section\">\r\n            <h1 class=\"blog-title\">\r\n              <el-icon class=\"logo-icon\"><Star /></el-icon>\r\n              Ice BLOG\r\n            </h1>\r\n          </div>\r\n          \r\n          <nav class=\"main-nav\">\r\n            <el-menu\r\n              mode=\"horizontal\"\r\n              class=\"nav-menu\"\r\n              :default-active=\"$route.path\"\r\n              router\r\n              background-color=\"transparent\"\r\n              text-color=\"#4A5568\"\r\n              active-text-color=\"#87CEEB\"\r\n            >\r\n              <el-menu-item index=\"/home\">\r\n                <el-icon><House /></el-icon>\r\n                <span>首页</span>\r\n              </el-menu-item>\r\n              <el-menu-item index=\"/articles\">\r\n                <el-icon><Document /></el-icon>\r\n                <span>文章</span>\r\n              </el-menu-item>\r\n              <el-menu-item index=\"/create\">\r\n                <el-icon><Edit /></el-icon>\r\n                <span>发布文章</span>\r\n              </el-menu-item>\r\n              <el-menu-item index=\"/about\">\r\n                <el-icon><InfoFilled /></el-icon>\r\n                <span>关于</span>\r\n              </el-menu-item>\r\n              <el-menu-item index=\"/search\">\r\n                <el-icon><Search /></el-icon>\r\n                <span>搜索</span>\r\n              </el-menu-item>\r\n              <el-menu-item index=\"/theme-demo\">\r\n                <el-icon><ElPaletteIcon /></el-icon>\r\n                <span>主题</span>\r\n              </el-menu-item>\r\n            </el-menu>\r\n          </nav>\r\n\r\n          <!-- 右侧用户区域 -->\r\n          <div class=\"user-section\">\r\n            <div v-if=\"!authStore.isAuthenticated\" class=\"auth-buttons\">\r\n              <el-button type=\"primary\" @click=\"$router.push('/login')\">\r\n                登录\r\n              </el-button>\r\n              <el-button type=\"success\" @click=\"$router.push('/register')\">\r\n                注册\r\n              </el-button>\r\n            </div>\r\n\r\n            <div v-else class=\"user-info\">\r\n              <el-dropdown @command=\"handleUserAction\">\r\n                <div class=\"user-avatar-section\">\r\n                  <el-avatar\r\n                    :size=\"40\"\r\n                    :src=\"authStore.user?.avatar_url\"\r\n                    class=\"user-avatar\"\r\n                  >\r\n                    <el-icon><User /></el-icon>\r\n                  </el-avatar>\r\n                  <span class=\"username\">{{ authStore.user?.username }}</span>\r\n                  <el-icon class=\"dropdown-icon\"><ArrowDown /></el-icon>\r\n                </div>\r\n                <template #dropdown>\r\n                  <el-dropdown-menu>\r\n                    <el-dropdown-item command=\"profile\">\r\n                      <el-icon><User /></el-icon>\r\n                      个人资料\r\n                    </el-dropdown-item>\r\n                    <el-dropdown-item command=\"my-articles\">\r\n                      <el-icon><Document /></el-icon>\r\n                      我的文章\r\n                    </el-dropdown-item>\r\n                    <el-dropdown-item command=\"settings\">\r\n                      <el-icon><Setting /></el-icon>\r\n                      设置\r\n                    </el-dropdown-item>\r\n                    <el-dropdown-item divided command=\"logout\">\r\n                      <el-icon><SwitchButton /></el-icon>\r\n                      退出登录\r\n                    </el-dropdown-item>\r\n                  </el-dropdown-menu>\r\n                </template>\r\n              </el-dropdown>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      <!-- 主内容区域 -->\r\n      <main class=\"main-content\">\r\n        <div class=\"content-wrapper\">\r\n          <router-view v-slot=\"{ Component }\">\r\n            <transition name=\"page-fade\" mode=\"out-in\">\r\n              <component :is=\"Component\" />\r\n            </transition>\r\n          </router-view>\r\n        </div>\r\n      </main>\r\n\r\n      <!-- 底部 -->\r\n      <footer class=\"blog-footer\">\r\n        <div class=\"footer-content\">\r\n          <div class=\"footer-info\">\r\n            <h3>\r\n              <el-icon><House /></el-icon>\r\n              Ice BLOG\r\n            </h3>\r\n            <p>一个优雅的个人博客系统</p>\r\n          </div>\r\n          <div class=\"footer-links\">\r\n            <a href=\"#\">关于我们</a>\r\n            <a href=\"#\">联系方式</a>\r\n            <a href=\"#\">隐私政策</a>\r\n          </div>\r\n          <div class=\"footer-copyright\">\r\n            <p>&copy; 2024 Ice BLOG. All rights reserved.</p>\r\n          </div>\r\n        </div>\r\n      </footer>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useAuthStore } from './stores/auth'\r\nimport { ElMessage } from 'element-plus'\r\nimport {\r\n  Star, House, Document, Edit, InfoFilled, Search,\r\n  User, ArrowDown, Setting, SwitchButton\r\n} from '@element-plus/icons-vue'\r\n\r\n\r\n\r\nexport default {\r\n  name: 'App',\r\n  components: {\r\n    Star,\r\n    House,\r\n    Document,\r\n    Edit,\r\n    InfoFilled,\r\n    Search,\r\n    User,\r\n    ArrowDown,\r\n    Setting,\r\n    SwitchButton,\r\n  },\r\n  setup() {\r\n    const authStore = useAuthStore()\r\n    return { authStore }\r\n  },\r\n  async created() {\r\n    // 初始化认证状态\r\n    await this.authStore.initAuth()\r\n    \r\n    // 如果用户已登录且在登录/注册页，重定向到首页\r\n    if (this.authStore.isAuthenticated && ['/login', '/register'].includes(this.$route.path)) {\r\n      await this.$router.push('/home')\r\n    }\r\n    \r\n    // 移除未登录时的重定向逻辑，允许用户访问主页\r\n  },\r\n  methods: {\r\n    async handleUserAction(command) {\r\n      switch (command) {\r\n        case 'profile':\r\n          await this.$router.push('/profile')\r\n          break\r\n        case 'my-articles':\r\n          await this.$router.push('/my-articles')\r\n          break\r\n        case 'settings':\r\n          await this.$router.push('/settings')\r\n          break\r\n        case 'logout':\r\n          await this.handleLogout()\r\n          break\r\n      }\r\n    },\r\n    async handleLogout() {\r\n      try {\r\n        this.authStore.logout()\r\n        ElMessage.success('退出登录成功')\r\n        await this.$router.push('/home')  // 退出登录后回到首页而不是登录页\r\n      } catch (error) {\r\n        console.error('退出登录失败:', error)\r\n        ElMessage.error('退出登录失败')\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n/* Ice BLOG 主题色彩变量 */\r\n:root {\r\n  --ice-primary: #B0E0E6;        /* 浅天蓝色 */\r\n  --ice-primary-light: #E0F6FF;  /* 更浅的天蓝色 */\r\n  --ice-primary-dark: #87CEEB;   /* 稍深的天蓝色 */\r\n  --ice-green: #98FB98;          /* 浅绿色点缀 */\r\n  --ice-green-light: #F0FFF0;    /* 极浅绿色 */\r\n  --ice-green-dark: #90EE90;     /* 稍深浅绿色 */\r\n  --ice-dark: #4A5568;           /* 柔和的深灰色 */\r\n  --ice-dark-light: #718096;     /* 浅一点的灰色 */\r\n  --ice-white: #FFFFFF;          /* 纯白色 */\r\n  --ice-light-gray: #F7FAFC;     /* 浅灰色背景 */\r\n  --ice-border: #E2E8F0;         /* 边框色 */\r\n  --ice-text: #2D3748;           /* 文本色 */\r\n  --ice-text-light: #718096;     /* 浅文本色 */\r\n  --ice-accent: #90CDF4;         /* 强调色 */\r\n}\r\n\r\n* {\r\n  margin: 0;\r\n  padding: 0;\r\n  box-sizing: border-box;\r\n}\r\n\r\nbody {\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\r\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n}\r\n\r\n#app {\r\n  min-height: 100vh;\r\n  background: linear-gradient(135deg, var(--ice-light-gray) 0%, var(--ice-green-light) 50%, var(--ice-light-gray) 100%);\r\n}\r\n\r\n.blog-layout {\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 100vh;\r\n}\r\n\r\n/* =====  头部样式 ===== */\r\n.blog-header {\r\n  background: linear-gradient(135deg, var(--ice-primary) 0%, var(--ice-green-light) 30%, var(--ice-primary-dark) 100%);\r\n  box-shadow: 0 2px 20px rgba(152, 251, 152, 0.2);\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 1000;\r\n}\r\n\r\n.header-content {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 0 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  height: 70px;\r\n}\r\n\r\n.logo-section {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.blog-title {\r\n  color: var(--ice-dark);\r\n  font-size: 28px;\r\n  font-weight: 700;\r\n  margin: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  letter-spacing: 1px;\r\n}\r\n\r\n.logo-icon {\r\n  font-size: 32px;\r\n  color: var(--ice-dark);\r\n}\r\n\r\n/* 导航栏样式 */\r\n.main-nav {\r\n  flex: 1;\r\n  display: flex;\r\n  justify-content: center;\r\n  max-width: 600px;\r\n}\r\n\r\n.nav-menu {\r\n  border: none;\r\n  background: transparent;\r\n}\r\n\r\n.nav-menu .el-menu-item {\r\n  border: none;\r\n  color: var(--ice-dark);\r\n  font-weight: 500;\r\n  margin: 0 8px;\r\n  border-radius: 8px;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.nav-menu .el-menu-item:hover {\r\n  background-color: rgba(152, 251, 152, 0.2);\r\n  color: var(--ice-dark);\r\n}\r\n\r\n.nav-menu .el-menu-item.is-active {\r\n  background: linear-gradient(135deg, var(--ice-white) 0%, var(--ice-green-light) 100%);\r\n  color: var(--ice-green-dark);\r\n  border: 1px solid var(--ice-green);\r\n}\r\n\r\n.nav-menu .el-menu-item span {\r\n  margin-left: 6px;\r\n  font-size: 14px;\r\n}\r\n\r\n/* 用户区域样式 */\r\n.user-section {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.auth-buttons {\r\n  display: flex;\r\n  gap: 12px;\r\n}\r\n\r\n.auth-buttons .el-button {\r\n  border-radius: 20px;\r\n  font-weight: 500;\r\n}\r\n\r\n.user-info {\r\n  cursor: pointer;\r\n}\r\n\r\n.user-avatar-section {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  padding: 8px 12px;\r\n  border-radius: 25px;\r\n  transition: background-color 0.3s ease;\r\n}\r\n\r\n.user-avatar-section:hover {\r\n  background-color: rgba(255, 255, 255, 0.2);\r\n}\r\n\r\n.user-avatar {\r\n  border: 2px solid var(--ice-dark);\r\n}\r\n\r\n.username {\r\n  color: var(--ice-dark);\r\n  font-weight: 500;\r\n  font-size: 14px;\r\n}\r\n\r\n.dropdown-icon {\r\n  color: var(--ice-dark);\r\n  font-size: 12px;\r\n}\r\n\r\n/* ===== 主内容样式 ===== */\r\n.main-content {\r\n  flex: 1;\r\n  min-height: calc(100vh - 140px);\r\n}\r\n\r\n.content-wrapper {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 30px 20px;\r\n}\r\n\r\n/* ===== 底部样式 ===== */\r\n.blog-footer {\r\n  background: linear-gradient(135deg, var(--ice-green-light) 0%, var(--ice-primary-light) 50%, var(--ice-primary) 100%);\r\n  color: var(--ice-dark);\r\n  margin-top: auto;\r\n}\r\n\r\n.footer-content {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 40px 20px 20px;\r\n  display: grid;\r\n  grid-template-columns: 2fr 1fr 1fr;\r\n  gap: 40px;\r\n  align-items: start;\r\n}\r\n\r\n.footer-info h3 {\r\n  color: var(--ice-dark);\r\n  font-size: 20px;\r\n  margin-bottom: 10px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.footer-info p {\r\n  color: var(--ice-dark-light);\r\n  line-height: 1.6;\r\n}\r\n\r\n.footer-links {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n}\r\n\r\n.footer-links a {\r\n  color: var(--ice-dark-light);\r\n  text-decoration: none;\r\n  transition: color 0.3s ease;\r\n}\r\n\r\n.footer-links a:hover {\r\n  color: var(--ice-dark);\r\n}\r\n\r\n.footer-copyright {\r\n  text-align: right;\r\n}\r\n\r\n.footer-copyright p {\r\n  color: var(--ice-dark-light);\r\n  font-size: 14px;\r\n}\r\n\r\n/* ===== 动画效果 ===== */\r\n.page-fade-enter-active,\r\n.page-fade-leave-active {\r\n  transition: opacity 0.3s ease, transform 0.3s ease;\r\n}\r\n\r\n.page-fade-enter-from {\r\n  opacity: 0;\r\n  transform: translateY(10px);\r\n}\r\n\r\n.page-fade-leave-to {\r\n  opacity: 0;\r\n  transform: translateY(-10px);\r\n}\r\n\r\n/* ===== 响应式设计 ===== */\r\n@media (max-width: 1024px) {\r\n  .header-content {\r\n    padding: 0 15px;\r\n  }\r\n  \r\n  .content-wrapper {\r\n    padding: 20px 15px;\r\n  }\r\n  \r\n  .footer-content {\r\n    grid-template-columns: 1fr;\r\n    gap: 20px;\r\n    text-align: center;\r\n  }\r\n  \r\n  .footer-copyright {\r\n    text-align: center;\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .header-content {\r\n    height: auto;\r\n    padding: 15px;\r\n    flex-direction: column;\r\n    gap: 15px;\r\n  }\r\n  \r\n  .blog-title {\r\n    font-size: 24px;\r\n  }\r\n  \r\n  .main-nav {\r\n    width: 100%;\r\n    justify-content: center;\r\n  }\r\n  \r\n  .nav-menu {\r\n    justify-content: center;\r\n  }\r\n  \r\n  .nav-menu .el-menu-item {\r\n    margin: 0 4px;\r\n    padding: 0 12px;\r\n  }\r\n  \r\n  .nav-menu .el-menu-item span {\r\n    display: none;\r\n  }\r\n  \r\n  .user-section {\r\n    width: 100%;\r\n    justify-content: center;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .content-wrapper {\r\n    padding: 15px 10px;\r\n  }\r\n  \r\n  .footer-content {\r\n    padding: 20px 15px;\r\n  }\r\n  \r\n  .blog-title {\r\n    font-size: 20px;\r\n  }\r\n  \r\n  .logo-icon {\r\n    font-size: 24px;\r\n  }\r\n}\r\n</style>"],"mappings":";AA2IA,SAASA,YAAW,QAAS,eAAc;AAC3C,SAASC,SAAQ,QAAS,cAAa;AACvC,SACEC,IAAI,EAAEC,KAAK,EAAEC,QAAQ,EAAEC,IAAI,EAAEC,UAAU,EAAEC,MAAM,EAC/CC,IAAI,EAAEC,SAAS,EAAEC,OAAO,EAAEC,YAAW,QAChC,yBAAwB;AAI/B,eAAe;EACbC,IAAI,EAAE,KAAK;EACXC,UAAU,EAAE;IACVX,IAAI;IACJC,KAAK;IACLC,QAAQ;IACRC,IAAI;IACJC,UAAU;IACVC,MAAM;IACNC,IAAI;IACJC,SAAS;IACTC,OAAO;IACPC;EACF,CAAC;EACDG,KAAKA,CAAA,EAAG;IACN,MAAMC,SAAQ,GAAIf,YAAY,CAAC;IAC/B,OAAO;MAAEe;IAAU;EACrB,CAAC;EACD,MAAMC,OAAOA,CAAA,EAAG;IACd;IACA,MAAM,IAAI,CAACD,SAAS,CAACE,QAAQ,CAAC;;IAE9B;IACA,IAAI,IAAI,CAACF,SAAS,CAACG,eAAc,IAAK,CAAC,QAAQ,EAAE,WAAW,CAAC,CAACC,QAAQ,CAAC,IAAI,CAACC,MAAM,CAACC,IAAI,CAAC,EAAE;MACxF,MAAM,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,OAAO;IACjC;;IAEA;EACF,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,gBAAgBA,CAACC,OAAO,EAAE;MAC9B,QAAQA,OAAO;QACb,KAAK,SAAS;UACZ,MAAM,IAAI,CAACJ,OAAO,CAACC,IAAI,CAAC,UAAU;UAClC;QACF,KAAK,aAAa;UAChB,MAAM,IAAI,CAACD,OAAO,CAACC,IAAI,CAAC,cAAc;UACtC;QACF,KAAK,UAAU;UACb,MAAM,IAAI,CAACD,OAAO,CAACC,IAAI,CAAC,WAAW;UACnC;QACF,KAAK,QAAQ;UACX,MAAM,IAAI,CAACI,YAAY,CAAC;UACxB;MACJ;IACF,CAAC;IACD,MAAMA,YAAYA,CAAA,EAAG;MACnB,IAAI;QACF,IAAI,CAACZ,SAAS,CAACa,MAAM,CAAC;QACtB3B,SAAS,CAAC4B,OAAO,CAAC,QAAQ;QAC1B,MAAM,IAAI,CAACP,OAAO,CAACC,IAAI,CAAC,OAAO,GAAG;MACpC,EAAE,OAAOO,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,SAAS,EAAEA,KAAK;QAC9B7B,SAAS,CAAC6B,KAAK,CAAC,QAAQ;MAC1B;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}