{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport { ElMessage } from 'element-plus';\nimport { Edit, EditPen, Collection, Promotion, Plus, Picture, Document, View } from '@element-plus/icons-vue';\nimport { articleAPI, categoryAPI, uploadAPI } from '@/api/blog';\nexport default {\n  name: 'ArticleEditor',\n  components: {\n    Edit,\n    EditPen,\n    Collection,\n    Promotion,\n    Plus,\n    Picture,\n    Document,\n    View\n  },\n  data() {\n    return {\n      form: {\n        title: '',\n        summary: '',\n        content: '',\n        category_id: null,\n        is_published: true,\n        tags: []\n      },\n      categories: [],\n      previewMode: false,\n      saving: false,\n      publishing: false,\n      // 标签输入\n      inputVisible: false,\n      inputValue: '',\n      // 新建分类\n      showCategoryDialog: false,\n      creatingCategory: false,\n      categoryForm: {\n        name: '',\n        description: ''\n      },\n      rules: {\n        title: [{\n          required: true,\n          message: '请输入文章标题',\n          trigger: 'blur'\n        }, {\n          min: 1,\n          max: 100,\n          message: '标题长度在1到100个字符',\n          trigger: 'blur'\n        }],\n        content: [{\n          required: true,\n          message: '请输入文章内容',\n          trigger: 'blur'\n        }],\n        category_id: [{\n          required: true,\n          message: '请选择文章分类',\n          trigger: 'change'\n        }]\n      },\n      categoryRules: {\n        name: [{\n          required: true,\n          message: '请输入分类名称',\n          trigger: 'blur'\n        }, {\n          min: 1,\n          max: 50,\n          message: '分类名称长度在1到50个字符',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  computed: {\n    isEdit() {\n      return this.$route.name === 'ArticleEdit';\n    },\n    articleId() {\n      return this.$route.params.id;\n    },\n    renderedContent() {\n      // 简单的Markdown渲染（实际项目中建议使用专业的markdown解析器）\n      if (!this.form.content) return '';\n      return this.form.content.replace(/\\n/g, '<br>').replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>').replace(/\\*(.*?)\\*/g, '<em>$1</em>').replace(/`(.*?)`/g, '<code>$1</code>').replace(/!\\[(.*?)\\]\\((.*?)\\)/g, '<img src=\"$2\" alt=\"$1\" class=\"content-image\">').replace(/\\[(.*?)\\]\\((.*?)\\)/g, '<a href=\"$2\" target=\"_blank\" rel=\"noopener noreferrer\">$1</a>');\n    }\n  },\n  async created() {\n    await this.loadCategories();\n    if (this.isEdit && this.articleId) {\n      await this.loadArticle();\n    }\n  },\n  methods: {\n    // 加载分类列表\n    async loadCategories() {\n      try {\n        const response = await categoryAPI.getCategories();\n        // 处理Django REST Framework的分页响应格式\n        this.categories = Array.isArray(response) ? response : response.results || [];\n        // 过滤掉 null 或 undefined 的分类\n        this.categories = this.categories.filter(category => category != null);\n      } catch (error) {\n        console.error('加载分类失败:', error);\n        ElMessage.error('加载分类列表失败');\n        // 确保 categories 是一个空数组而不是 null\n        this.categories = [];\n      }\n    },\n    // 加载文章详情（编辑模式）\n    async loadArticle() {\n      try {\n        const article = await articleAPI.getArticle(this.articleId);\n        this.form = {\n          title: article.title || '',\n          summary: article.summary || '',\n          content: article.content || '',\n          category_id: article.category_id || null,\n          is_published: article.is_published || false,\n          tags: article.tags || []\n        };\n      } catch (error) {\n        console.error('加载文章失败:', error);\n        ElMessage.error('加载文章失败');\n        this.$router.push('/articles');\n      }\n    },\n    // 保存草稿\n    async saveDraft() {\n      const isValid = await this.$refs.articleForm.validate().catch(() => false);\n      if (!isValid) return;\n      try {\n        this.saving = true;\n        const data = {\n          ...this.form,\n          is_published: false\n        };\n        if (this.isEdit) {\n          await articleAPI.updateArticle(this.articleId, data);\n          ElMessage.success('草稿保存成功');\n        } else {\n          await articleAPI.createArticle(data);\n          ElMessage.success('草稿保存成功');\n          // this.$router.replace(`/articles/edit/${article.id || article.data.id}`)\n        }\n      } catch (error) {\n        console.error('保存草稿失败:', error);\n        ElMessage.error('保存草稿失败，请重试');\n      } finally {\n        this.saving = false;\n      }\n    },\n    // 发布文章\n    async publishArticle() {\n      const isValid = await this.$refs.articleForm.validate().catch(() => false);\n      if (!isValid) return;\n      try {\n        this.publishing = true;\n        const data = {\n          ...this.form,\n          is_published: true\n        };\n        if (this.isEdit) {\n          await articleAPI.updateArticle(this.articleId, data);\n          ElMessage.success('文章更新成功');\n        } else {\n          await articleAPI.createArticle(data);\n          ElMessage.success('文章发布成功');\n          // this.$router.push(`/articles/${article.id || article.data.id}`)\n          return;\n        }\n        this.$router.push(`/articles/${this.articleId}`);\n      } catch (error) {\n        console.error('发布文章失败:', error);\n        ElMessage.error('发布文章失败，请重试');\n      } finally {\n        this.publishing = false;\n      }\n    },\n    // 创建新分类\n    async createCategory() {\n      const isValid = await this.$refs.categoryFormRef.validate().catch(() => false);\n      if (!isValid) return;\n      try {\n        this.creatingCategory = true;\n        const category = await categoryAPI.createCategory(this.categoryForm);\n        // 确保 category 不是 null\n        if (category) {\n          this.categories.push(category);\n          this.form.category_id = category.id;\n        }\n        this.showCategoryDialog = false;\n        this.categoryForm = {\n          name: '',\n          description: ''\n        };\n        ElMessage.success('分类创建成功');\n      } catch (error) {\n        console.error('创建分类失败:', error);\n        ElMessage.error('创建分类失败，请重试');\n      } finally {\n        this.creatingCategory = false;\n      }\n    },\n    // 切换预览模式\n    togglePreview() {\n      this.previewMode = !this.previewMode;\n    },\n    // 插入图片\n    insertImage() {\n      this.$refs.imageInput.click();\n    },\n    // 插入文件\n    insertFile() {\n      this.$refs.fileInput.click();\n    },\n    // 处理图片上传\n    async handleImageUpload(event) {\n      const files = Array.from(event.target.files);\n      if (files.length === 0) return;\n      try {\n        for (const file of files) {\n          await uploadAPI.uploadFile(file);\n          // const imageUrl = response.url\n          // const imageMarkdown = `![${file.name}](${imageUrl})\\n`\n          // this.insertTextAtCursor(imageMarkdown)\n        }\n        ElMessage.success(`成功上传 ${files.length} 张图片`);\n      } catch (error) {\n        console.error('图片上传失败:', error);\n        ElMessage.error('图片上传失败，请重试');\n      } finally {\n        event.target.value = ''; // 清空input\n      }\n    },\n    // 处理文件上传\n    async handleFileUpload(event) {\n      const files = Array.from(event.target.files);\n      if (files.length === 0) return;\n      try {\n        for (const file of files) {\n          await uploadAPI.uploadFile(file);\n          // const fileUrl = response.url\n          // const fileMarkdown = `[${file.name}](${fileUrl})\\n`\n          // this.insertTextAtCursor(fileMarkdown)\n        }\n        ElMessage.success(`成功上传 ${files.length} 个文件`);\n      } catch (error) {\n        console.error('文件上传失败:', error);\n        ElMessage.error('文件上传失败，请重试');\n      } finally {\n        event.target.value = ''; // 清空input\n      }\n    },\n    // 在光标位置插入文本\n    insertTextAtCursor(text) {\n      const textarea = this.$el.querySelector('.content-textarea textarea');\n      if (textarea) {\n        const start = textarea.selectionStart;\n        const end = textarea.selectionEnd;\n        const content = this.form.content;\n        this.form.content = content.substring(0, start) + text + content.substring(end);\n\n        // 设置光标位置\n        this.$nextTick(() => {\n          textarea.focus();\n          textarea.setSelectionRange(start + text.length, start + text.length);\n        });\n      } else {\n        this.form.content += text;\n      }\n    },\n    // 标签管理\n    removeTag(tag) {\n      this.form.tags = this.form.tags.filter(t => t !== tag);\n    },\n    showInput() {\n      this.inputVisible = true;\n      this.$nextTick(() => {\n        this.$refs.tagInput.focus();\n      });\n    },\n    handleInputConfirm() {\n      const value = this.inputValue.trim();\n      if (value && !this.form.tags.includes(value)) {\n        this.form.tags.push(value);\n      }\n      this.inputVisible = false;\n      this.inputValue = '';\n    }\n  }\n};","map":{"version":3,"names":["ElMessage","Edit","EditPen","Collection","Promotion","Plus","Picture","Document","View","articleAPI","categoryAPI","uploadAPI","name","components","data","form","title","summary","content","category_id","is_published","tags","categories","previewMode","saving","publishing","inputVisible","inputValue","showCategoryDialog","creatingCategory","categoryForm","description","rules","required","message","trigger","min","max","categoryRules","computed","isEdit","$route","articleId","params","id","renderedContent","replace","created","loadCategories","loadArticle","methods","response","getCategories","Array","isArray","results","filter","category","error","console","article","getArticle","$router","push","saveDraft","isValid","$refs","articleForm","validate","catch","updateArticle","success","createArticle","publishArticle","createCategory","categoryFormRef","togglePreview","insertImage","imageInput","click","insertFile","fileInput","handleImageUpload","event","files","from","target","length","file","uploadFile","value","handleFileUpload","insertTextAtCursor","text","textarea","$el","querySelector","start","selectionStart","end","selectionEnd","substring","$nextTick","focus","setSelectionRange","removeTag","tag","t","showInput","tagInput","handleInputConfirm","trim","includes"],"sources":["/Users/a123/PythonProject/System/django_blog/frontend/src/components/ArticleEditor.vue"],"sourcesContent":["<template>\n  <div class=\"article-editor\">\n    <div class=\"editor-header\">\n      <h1 v-if=\"isEdit\">\n        <el-icon><Edit /></el-icon>\n        编辑文章\n      </h1>\n      <h1 v-else>\n        <el-icon><EditPen /></el-icon>\n        发布文章\n      </h1>\n      \n      <div class=\"header-actions\">\n        <el-button @click=\"saveDraft\" :loading=\"saving\">\n          <el-icon><Collection /></el-icon>\n          保存草稿\n        </el-button>\n        <el-button type=\"primary\" @click=\"publishArticle\" :loading=\"publishing\">\n          <el-icon><Promotion /></el-icon>\n          {{ isEdit ? '更新文章' : '发布文章' }}\n        </el-button>\n      </div>\n    </div>\n\n    <div class=\"editor-container\">\n      <el-form\n        ref=\"articleForm\"\n        :model=\"form\"\n        :rules=\"rules\"\n        label-width=\"80px\"\n        class=\"article-form\"\n      >\n        <!-- 文章标题 -->\n        <el-form-item label=\"文章标题\" prop=\"title\" class=\"title-item\">\n          <el-input\n            v-model=\"form.title\"\n            placeholder=\"请输入文章标题（建议50字以内）\"\n            maxlength=\"100\"\n            show-word-limit\n            size=\"large\"\n            clearable\n          />\n        </el-form-item>\n\n        <!-- 文章摘要 -->\n        <el-form-item label=\"文章摘要\" prop=\"summary\">\n          <el-input\n            v-model=\"form.summary\"\n            type=\"textarea\"\n            :rows=\"3\"\n            placeholder=\"请输入文章摘要（可选，建议200字以内）\"\n            maxlength=\"300\"\n            show-word-limit\n          />\n        </el-form-item>\n\n        <!-- 分类选择 -->\n        <el-form-item label=\"文章分类\" prop=\"category_id\">\n          <div class=\"category-selector\">\n            <el-select\n              v-model=\"form.category_id\"\n              placeholder=\"选择文章分类\"\n              filterable\n              style=\"width: 200px\"\n            >\n              <el-option\n                v-for=\"category in categories\"\n                :key=\"category?.id\"\n                :label=\"category?.name\"\n                :value=\"category?.id\"\n              />\n            </el-select>\n            <el-button @click=\"showCategoryDialog = true\" text type=\"primary\">\n              <el-icon><Plus /></el-icon>\n              新建分类\n            </el-button>\n          </div>\n        </el-form-item>\n\n        <!-- 文章内容 -->\n        <el-form-item label=\"文章内容\" prop=\"content\" class=\"content-item\">\n          <div class=\"editor-toolbar\">\n            <el-button-group>\n              <el-button @click=\"insertImage\" size=\"small\">\n                <el-icon><Picture /></el-icon>\n                插入图片\n              </el-button>\n              <el-button @click=\"insertFile\" size=\"small\">\n                <el-icon><Document /></el-icon>\n                插入文件\n              </el-button>\n              <el-button @click=\"togglePreview\" size=\"small\" :type=\"previewMode ? 'primary' : ''\">\n                <el-icon><View /></el-icon>\n                {{ previewMode ? '编辑模式' : '预览模式' }}\n              </el-button>\n            </el-button-group>\n          </div>\n\n          <!-- 文本编辑器 -->\n          <div class=\"content-editor\">\n            <el-input\n              v-show=\"!previewMode\"\n              v-model=\"form.content\"\n              type=\"textarea\"\n              :rows=\"20\"\n              placeholder=\"开始写作你的文章内容...\"\n              class=\"content-textarea\"\n            />\n            \n            <!-- Markdown预览 -->\n            <div v-show=\"previewMode\" class=\"content-preview\" v-html=\"renderedContent\"></div>\n          </div>\n        </el-form-item>\n\n        <!-- 文章标签 -->\n        <el-form-item label=\"文章标签\">\n          <el-tag\n            v-for=\"tag in form.tags\"\n            :key=\"tag\"\n            closable\n            @close=\"removeTag(tag)\"\n            class=\"tag-item\"\n          >\n            {{ tag }}\n          </el-tag>\n          <el-input\n            v-if=\"inputVisible\"\n            ref=\"tagInput\"\n            v-model=\"inputValue\"\n            size=\"small\"\n            style=\"width: 100px\"\n            @keyup.enter=\"handleInputConfirm\"\n            @blur=\"handleInputConfirm\"\n          />\n          <el-button v-else @click=\"showInput\" size=\"small\" text>\n            <el-icon><Plus /></el-icon>\n            添加标签\n          </el-button>\n        </el-form-item>\n\n        <!-- 发布状态 -->\n        <el-form-item label=\"发布状态\" v-if=\"!isEdit\">\n          <el-radio-group v-model=\"form.is_published\">\n            <el-radio :label=\"true\">立即发布</el-radio>\n            <el-radio :label=\"false\">保存为草稿</el-radio>\n          </el-radio-group>\n        </el-form-item>\n      </el-form>\n    </div>\n\n    <!-- 新建分类对话框 -->\n    <el-dialog\n      v-model=\"showCategoryDialog\"\n      title=\"新建分类\"\n      width=\"400px\"\n      :close-on-click-modal=\"false\"\n    >\n      <el-form :model=\"categoryForm\" :rules=\"categoryRules\" ref=\"categoryFormRef\">\n        <el-form-item label=\"分类名称\" prop=\"name\">\n          <el-input\n            v-model=\"categoryForm.name\"\n            placeholder=\"请输入分类名称\"\n            maxlength=\"50\"\n          />\n        </el-form-item>\n        <el-form-item label=\"分类描述\" prop=\"description\">\n          <el-input\n            v-model=\"categoryForm.description\"\n            type=\"textarea\"\n            :rows=\"3\"\n            placeholder=\"请输入分类描述（可选）\"\n            maxlength=\"200\"\n          />\n        </el-form-item>\n      </el-form>\n      \n      <template #footer>\n        <div class=\"dialog-footer\">\n          <el-button @click=\"showCategoryDialog = false\">取消</el-button>\n          <el-button type=\"primary\" @click=\"createCategory\" :loading=\"creatingCategory\">\n            创建\n          </el-button>\n        </div>\n      </template>\n    </el-dialog>\n\n    <!-- 文件上传组件（隐藏） -->\n    <input\n      ref=\"imageInput\"\n      type=\"file\"\n      accept=\"image/*\"\n      multiple\n      style=\"display: none\"\n      @change=\"handleImageUpload\"\n    />\n    <input\n      ref=\"fileInput\"\n      type=\"file\"\n      multiple\n      style=\"display: none\"\n      @change=\"handleFileUpload\"\n    />\n  </div>\n</template>\n\n<script>\nimport { ElMessage } from 'element-plus'\nimport {\n  Edit,\n  EditPen,\n  Collection,\n  Promotion,\n  Plus,\n  Picture,\n  Document,\n  View\n} from '@element-plus/icons-vue'\nimport { articleAPI, categoryAPI, uploadAPI } from '@/api/blog'\n\nexport default {\n  name: 'ArticleEditor',\n  components: {\n    Edit,\n    EditPen,\n    Collection,\n    Promotion,\n    Plus,\n    Picture,\n    Document,\n    View\n  },\n  \n  data() {\n    return {\n      form: {\n        title: '',\n        summary: '',\n        content: '',\n        category_id: null,\n        is_published: true,\n        tags: []\n      },\n      \n      categories: [],\n      previewMode: false,\n      saving: false,\n      publishing: false,\n      \n      // 标签输入\n      inputVisible: false,\n      inputValue: '',\n      \n      // 新建分类\n      showCategoryDialog: false,\n      creatingCategory: false,\n      categoryForm: {\n        name: '',\n        description: ''\n      },\n      \n      rules: {\n        title: [\n          { required: true, message: '请输入文章标题', trigger: 'blur' },\n          { min: 1, max: 100, message: '标题长度在1到100个字符', trigger: 'blur' }\n        ],\n        content: [\n          { required: true, message: '请输入文章内容', trigger: 'blur' }\n        ],\n        category_id: [\n          { required: true, message: '请选择文章分类', trigger: 'change' }\n        ]\n      },\n      \n      categoryRules: {\n        name: [\n          { required: true, message: '请输入分类名称', trigger: 'blur' },\n          { min: 1, max: 50, message: '分类名称长度在1到50个字符', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  \n  computed: {\n    isEdit() {\n      return this.$route.name === 'ArticleEdit'\n    },\n    \n    articleId() {\n      return this.$route.params.id\n    },\n    \n    renderedContent() {\n      // 简单的Markdown渲染（实际项目中建议使用专业的markdown解析器）\n      if (!this.form.content) return ''\n      \n      return this.form.content\n        .replace(/\\n/g, '<br>')\n        .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')\n        .replace(/\\*(.*?)\\*/g, '<em>$1</em>')\n        .replace(/`(.*?)`/g, '<code>$1</code>')\n        .replace(/!\\[(.*?)\\]\\((.*?)\\)/g, '<img src=\"$2\" alt=\"$1\" class=\"content-image\">')\n        .replace(/\\[(.*?)\\]\\((.*?)\\)/g, '<a href=\"$2\" target=\"_blank\" rel=\"noopener noreferrer\">$1</a>')\n    }\n  },\n  \n  async created() {\n    await this.loadCategories()\n    \n    if (this.isEdit && this.articleId) {\n      await this.loadArticle()\n    }\n  },\n  \n  methods: {\n    // 加载分类列表\n    async loadCategories() {\n      try {\n        const response = await categoryAPI.getCategories()\n        // 处理Django REST Framework的分页响应格式\n        this.categories = Array.isArray(response) ? response : (response.results || [])\n        // 过滤掉 null 或 undefined 的分类\n        this.categories = this.categories.filter(category => category != null)\n      } catch (error) {\n        console.error('加载分类失败:', error)\n        ElMessage.error('加载分类列表失败')\n        // 确保 categories 是一个空数组而不是 null\n        this.categories = []\n      }\n    },\n    \n    // 加载文章详情（编辑模式）\n    async loadArticle() {\n      try {\n        const article = await articleAPI.getArticle(this.articleId)\n        this.form = {\n          title: article.title || '',\n          summary: article.summary || '',\n          content: article.content || '',\n          category_id: article.category_id || null,\n          is_published: article.is_published || false,\n          tags: article.tags || []\n        }\n      } catch (error) {\n        console.error('加载文章失败:', error)\n        ElMessage.error('加载文章失败')\n        this.$router.push('/articles')\n      }\n    },\n    \n    // 保存草稿\n    async saveDraft() {\n      const isValid = await this.$refs.articleForm.validate().catch(() => false)\n      if (!isValid) return\n      \n      try {\n        this.saving = true\n        const data = { ...this.form, is_published: false }\n        \n        if (this.isEdit) {\n          await articleAPI.updateArticle(this.articleId, data)\n          ElMessage.success('草稿保存成功')\n        } else {\n          await articleAPI.createArticle(data)\n          ElMessage.success('草稿保存成功')\n          // this.$router.replace(`/articles/edit/${article.id || article.data.id}`)\n        }\n      } catch (error) {\n        console.error('保存草稿失败:', error)\n        ElMessage.error('保存草稿失败，请重试')\n      } finally {\n        this.saving = false\n      }\n    },\n    \n    // 发布文章\n    async publishArticle() {\n      const isValid = await this.$refs.articleForm.validate().catch(() => false)\n      if (!isValid) return\n      \n      try {\n        this.publishing = true\n        const data = { ...this.form, is_published: true }\n        \n        if (this.isEdit) {\n          await articleAPI.updateArticle(this.articleId, data)\n          ElMessage.success('文章更新成功')\n        } else {\n          await articleAPI.createArticle(data)\n          ElMessage.success('文章发布成功')\n          // this.$router.push(`/articles/${article.id || article.data.id}`)\n          return\n        }\n        \n        this.$router.push(`/articles/${this.articleId}`)\n      } catch (error) {\n        console.error('发布文章失败:', error)\n        ElMessage.error('发布文章失败，请重试')\n      } finally {\n        this.publishing = false\n      }\n    },\n    \n    // 创建新分类\n    async createCategory() {\n      const isValid = await this.$refs.categoryFormRef.validate().catch(() => false)\n      if (!isValid) return\n      \n      try {\n        this.creatingCategory = true\n        const category = await categoryAPI.createCategory(this.categoryForm)\n        // 确保 category 不是 null\n        if (category) {\n          this.categories.push(category)\n          this.form.category_id = category.id\n        }\n        this.showCategoryDialog = false\n        this.categoryForm = { name: '', description: '' }\n        ElMessage.success('分类创建成功')\n      } catch (error) {\n        console.error('创建分类失败:', error)\n        ElMessage.error('创建分类失败，请重试')\n      } finally {\n        this.creatingCategory = false\n      }\n    },\n    \n    // 切换预览模式\n    togglePreview() {\n      this.previewMode = !this.previewMode\n    },\n    \n    // 插入图片\n    insertImage() {\n      this.$refs.imageInput.click()\n    },\n    \n    // 插入文件\n    insertFile() {\n      this.$refs.fileInput.click()\n    },\n    \n    // 处理图片上传\n    async handleImageUpload(event) {\n      const files = Array.from(event.target.files)\n      if (files.length === 0) return\n      \n      try {\n        for (const file of files) {\n          await uploadAPI.uploadFile(file)\n          // const imageUrl = response.url\n          // const imageMarkdown = `![${file.name}](${imageUrl})\\n`\n          // this.insertTextAtCursor(imageMarkdown)\n        }\n        ElMessage.success(`成功上传 ${files.length} 张图片`)\n      } catch (error) {\n        console.error('图片上传失败:', error)\n        ElMessage.error('图片上传失败，请重试')\n      } finally {\n        event.target.value = '' // 清空input\n      }\n    },\n    \n    // 处理文件上传\n    async handleFileUpload(event) {\n      const files = Array.from(event.target.files)\n      if (files.length === 0) return\n      \n      try {\n        for (const file of files) {\n          await uploadAPI.uploadFile(file)\n          // const fileUrl = response.url\n          // const fileMarkdown = `[${file.name}](${fileUrl})\\n`\n          // this.insertTextAtCursor(fileMarkdown)\n        }\n        ElMessage.success(`成功上传 ${files.length} 个文件`)\n      } catch (error) {\n        console.error('文件上传失败:', error)\n        ElMessage.error('文件上传失败，请重试')\n      } finally {\n        event.target.value = '' // 清空input\n      }\n    },\n    \n    // 在光标位置插入文本\n    insertTextAtCursor(text) {\n      const textarea = this.$el.querySelector('.content-textarea textarea')\n      if (textarea) {\n        const start = textarea.selectionStart\n        const end = textarea.selectionEnd\n        const content = this.form.content\n        this.form.content = content.substring(0, start) + text + content.substring(end)\n        \n        // 设置光标位置\n        this.$nextTick(() => {\n          textarea.focus()\n          textarea.setSelectionRange(start + text.length, start + text.length)\n        })\n      } else {\n        this.form.content += text\n      }\n    },\n    \n    // 标签管理\n    removeTag(tag) {\n      this.form.tags = this.form.tags.filter(t => t !== tag)\n    },\n    \n    showInput() {\n      this.inputVisible = true\n      this.$nextTick(() => {\n        this.$refs.tagInput.focus()\n      })\n    },\n    \n    handleInputConfirm() {\n      const value = this.inputValue.trim()\n      if (value && !this.form.tags.includes(value)) {\n        this.form.tags.push(value)\n      }\n      this.inputVisible = false\n      this.inputValue = ''\n    }\n  },\n  \n\n}\n</script>\n\n<style scoped>\n.article-editor {\n  max-width: 1200px;\n  margin: 0 auto;\n  background: white;\n  border-radius: 12px;\n  padding: 24px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n}\n\n.editor-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 30px;\n  padding-bottom: 20px;\n  border-bottom: 1px solid #f0f0f0;\n}\n\n.editor-header h1 {\n  margin: 0;\n  color: #2c3e50;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.header-actions {\n  display: flex;\n  gap: 12px;\n}\n\n.article-form {\n  max-width: 100%;\n}\n\n.title-item :deep(.el-form-item__content) {\n  width: 100%;\n}\n\n.content-item :deep(.el-form-item__content) {\n  width: 100%;\n}\n\n.category-selector {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.editor-toolbar {\n  margin-bottom: 12px;\n}\n\n.content-editor {\n  position: relative;\n  border: 1px solid #dcdfe6;\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n.content-textarea :deep(textarea) {\n  border: none !important;\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n  font-size: 14px;\n  line-height: 1.6;\n  resize: vertical;\n}\n\n.content-preview {\n  padding: 12px;\n  min-height: 400px;\n  background: #fafafa;\n  line-height: 1.8;\n  font-size: 14px;\n  color: #2c3e50;\n}\n\n.content-preview :deep(code) {\n  background: #f1f2f3;\n  padding: 2px 4px;\n  border-radius: 4px;\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n}\n\n.tag-item {\n  margin-right: 8px;\n  margin-bottom: 8px;\n}\n\n@media (max-width: 768px) {\n  .article-editor {\n    margin: 12px;\n    padding: 16px;\n  }\n  \n  .editor-header {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 16px;\n  }\n  \n  .header-actions {\n    width: 100%;\n    justify-content: flex-end;\n  }\n  \n  .category-selector {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}