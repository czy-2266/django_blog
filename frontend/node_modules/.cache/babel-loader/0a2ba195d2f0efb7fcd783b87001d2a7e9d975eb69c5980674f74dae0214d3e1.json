{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { useAuthStore } from '../stores/auth';\nimport { ElMessage } from 'element-plus';\nimport { User, Lock } from '@element-plus/icons-vue';\nexport default {\n  name: 'UserLogin',\n  components: {\n    User,\n    Lock\n  },\n  setup() {\n    const authStore = useAuthStore();\n    return {\n      authStore,\n      User,\n      Lock\n    };\n  },\n  data() {\n    return {\n      form: {\n        username: '',\n        password: ''\n      },\n      rules: {\n        username: [{\n          required: true,\n          message: '请输入用户名',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 50,\n          message: '用户名长度3-50个字符',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }, {\n          min: 6,\n          max: 100,\n          message: '密码长度6-100个字符',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    async handleLogin() {\n      try {\n        const valid = await this.$refs.loginForm.validate();\n        if (!valid) return;\n        const result = await this.authStore.login(this.form);\n        if (result.success) {\n          ElMessage.success('登录成功！');\n          await this.$router.push('/profile');\n        } else {\n          ElMessage.error(result.error || '登录失败');\n        }\n      } catch (error) {\n        console.error('登录错误:', error);\n        ElMessage.error('登录过程中出现错误');\n      }\n    }\n  }\n};","map":{"version":3,"names":["useAuthStore","ElMessage","User","Lock","name","components","setup","authStore","data","form","username","password","rules","required","message","trigger","min","max","methods","handleLogin","valid","$refs","loginForm","validate","result","login","success","$router","push","error","console"],"sources":["/Users/a123/PythonProject/System/django_blog/frontend/src/components/UserLogin.vue"],"sourcesContent":["<template>\n  <div class=\"login-container\">\n    <el-card class=\"login-card\" shadow=\"always\">\n      <template #header>\n        <div class=\"card-header\">\n          <h2><el-icon><User /></el-icon> 用户登录</h2>\n        </div>\n      </template>\n      \n      <el-form\n        ref=\"loginForm\"\n        :model=\"form\"\n        :rules=\"rules\"\n        label-width=\"80px\"\n        @submit.prevent=\"handleLogin\"\n      >\n        <el-form-item label=\"用户名\" prop=\"username\">\n          <el-input\n            v-model=\"form.username\"\n            placeholder=\"请输入用户名\"\n            :prefix-icon=\"User\"\n            clearable\n          />\n        </el-form-item>\n        \n        <el-form-item label=\"密码\" prop=\"password\">\n          <el-input\n            v-model=\"form.password\"\n            type=\"password\"\n            placeholder=\"请输入密码\"\n            :prefix-icon=\"Lock\"\n            show-password\n            clearable\n            @keyup.enter=\"handleLogin\"\n          />\n        </el-form-item>\n        \n        <el-form-item>\n          <el-button\n            type=\"primary\"\n            :loading=\"authStore.isLoading\"\n            @click=\"handleLogin\"\n            style=\"width: 100%\"\n          >\n            <el-icon v-if=\"!authStore.isLoading\"><Lock /></el-icon>\n            {{ authStore.isLoading ? '登录中...' : '登录' }}\n          </el-button>\n        </el-form-item>\n        \n        <el-form-item>\n          <div class=\"login-footer\">\n            <span>还没有账号？</span>\n            <router-link to=\"/register\" class=\"register-link\">\n              立即注册\n            </router-link>\n          </div>\n        </el-form-item>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { useAuthStore } from '../stores/auth'\nimport { ElMessage } from 'element-plus'\nimport { User, Lock } from '@element-plus/icons-vue'\n\nexport default {\n  name: 'UserLogin',\n  components: {\n    User,\n    Lock\n  },\n  setup() {\n    const authStore = useAuthStore()\n    return {\n      authStore,\n      User,\n      Lock\n    }\n  },\n  data() {\n    return {\n      form: {\n        username: '',\n        password: '',\n      },\n      rules: {\n        username: [\n          { required: true, message: '请输入用户名', trigger: 'blur' },\n          { min: 3, max: 50, message: '用户名长度3-50个字符', trigger: 'blur' }\n        ],\n        password: [\n          { required: true, message: '请输入密码', trigger: 'blur' },\n          { min: 6, max: 100, message: '密码长度6-100个字符', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  methods: {\n    async handleLogin() {\n      try {\n        const valid = await this.$refs.loginForm.validate()\n        if (!valid) return\n        \n        const result = await this.authStore.login(this.form)\n        \n        if (result.success) {\n          ElMessage.success('登录成功！')\n          await this.$router.push('/profile')\n        } else {\n          ElMessage.error(result.error || '登录失败')\n        }\n      } catch (error) {\n        console.error('登录错误:', error)\n        ElMessage.error('登录过程中出现错误')\n      }\n    }\n  }\n}\n</script>"],"mappings":";AA+DA,SAASA,YAAW,QAAS,gBAAe;AAC5C,SAASC,SAAQ,QAAS,cAAa;AACvC,SAASC,IAAI,EAAEC,IAAG,QAAS,yBAAwB;AAEnD,eAAe;EACbC,IAAI,EAAE,WAAW;EACjBC,UAAU,EAAE;IACVH,IAAI;IACJC;EACF,CAAC;EACDG,KAAKA,CAAA,EAAG;IACN,MAAMC,SAAQ,GAAIP,YAAY,CAAC;IAC/B,OAAO;MACLO,SAAS;MACTL,IAAI;MACJC;IACF;EACF,CAAC;EACDK,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE;QACJC,QAAQ,EAAE,EAAE;QACZC,QAAQ,EAAE;MACZ,CAAC;MACDC,KAAK,EAAE;QACLF,QAAQ,EAAE,CACR;UAAEG,QAAQ,EAAE,IAAI;UAAEC,OAAO,EAAE,QAAQ;UAAEC,OAAO,EAAE;QAAO,CAAC,EACtD;UAAEC,GAAG,EAAE,CAAC;UAAEC,GAAG,EAAE,EAAE;UAAEH,OAAO,EAAE,cAAc;UAAEC,OAAO,EAAE;QAAO,EAC7D;QACDJ,QAAQ,EAAE,CACR;UAAEE,QAAQ,EAAE,IAAI;UAAEC,OAAO,EAAE,OAAO;UAAEC,OAAO,EAAE;QAAO,CAAC,EACrD;UAAEC,GAAG,EAAE,CAAC;UAAEC,GAAG,EAAE,GAAG;UAAEH,OAAO,EAAE,cAAc;UAAEC,OAAO,EAAE;QAAO;MAEjE;IACF;EACF,CAAC;EACDG,OAAO,EAAE;IACP,MAAMC,WAAWA,CAAA,EAAG;MAClB,IAAI;QACF,MAAMC,KAAI,GAAI,MAAM,IAAI,CAACC,KAAK,CAACC,SAAS,CAACC,QAAQ,CAAC;QAClD,IAAI,CAACH,KAAK,EAAE;QAEZ,MAAMI,MAAK,GAAI,MAAM,IAAI,CAACjB,SAAS,CAACkB,KAAK,CAAC,IAAI,CAAChB,IAAI;QAEnD,IAAIe,MAAM,CAACE,OAAO,EAAE;UAClBzB,SAAS,CAACyB,OAAO,CAAC,OAAO;UACzB,MAAM,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,UAAU;QACpC,OAAO;UACL3B,SAAS,CAAC4B,KAAK,CAACL,MAAM,CAACK,KAAI,IAAK,MAAM;QACxC;MACF,EAAE,OAAOA,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,OAAO,EAAEA,KAAK;QAC5B5B,SAAS,CAAC4B,KAAK,CAAC,WAAW;MAC7B;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}